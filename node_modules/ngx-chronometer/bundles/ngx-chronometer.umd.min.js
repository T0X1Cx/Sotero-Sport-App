!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/core"),require("lodash")):"function"==typeof define&&define.amd?define("ngx-chronometer",["exports","rxjs","@angular/core","lodash"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-chronometer"]={},t.rxjs,t.ng.core,t._)}(this,(function(t,e,o,r){"use strict";var n,i;t.TimeChonometer=void 0,(n=t.TimeChonometer||(t.TimeChonometer={}))[n.timemedio=0]="timemedio",n[n.timeone=1]="timeone",n[n.timetwo=2]="timetwo",t.StatusChonometer=void 0,(i=t.StatusChonometer||(t.StatusChonometer={}))[i.desactived=0]="desactived",i[i.pause=1]="pause",i[i.start=2]="start",i[i.finish=3]="finish",i[i.restart=4]="restart",i[i.stop=5]="stop",i[i.refresh=6]="refresh";var s=function(){function o(o){void 0===o&&(o={}),this.time=new Array(0,0,0),this.onChronometer=new e.Subject,this.id=o.id,this.second=o.second||0,this.status=o.status||t.StatusChonometer.pause,this.timeLabel=o.timeLabel,this.maxSecond=o.maxSecond||60,this.maxMinute=o.maxMinute||60,this.maxHour=o.maxHour||60,this.limitSecond=o.limitSecond}return o.prototype.start=function(){this.status=t.StatusChonometer.start,this.onChronometer.next(this)},o.prototype.pause=function(){this.status=t.StatusChonometer.pause,this.onChronometer.next(this)},o.prototype.restart=function(){this.status=t.StatusChonometer.restart,this.onChronometer.next(this)},o.prototype.stop=function(){this.status=t.StatusChonometer.stop,this.onChronometer.next(this)},o.prototype.refresh=function(){this.onChronometer.next(this)},o}(),a=function(){function n(){this._chronometer=new s,this.interval=1e3,this.increment=1,this.format="00:00:00",this.chronoEvents=!1,this.onChronoEvent=new o.EventEmitter}return Object.defineProperty(n.prototype,"chronometer",{set:function(t){(t=t||new s).maxSecond=this.maxSecond||t.maxSecond||60,t.maxMinute=this.maxMinute||t.maxMinute||60,t.maxHour=this.maxHour||t.maxHour||60,t.time=new Array(0,0,0),this._chronometer=this.activated(this.currentSecond(t))},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){var t=this;null==this._chronometer.onChronometer.observers&&(this._chronometer.onChronometer=new e.Subject),this.chronoSub=this._chronometer.onChronometer.subscribe((function(e){t._chronometer=t.activated(t.currentSecond(e))}))},n.prototype.currentSecond=function(t){var e=this.limitSecond||t.limitSecond;return e&&t.second>e&&(t.second=e,t.pause(),this._chronometer=t,this._chronometer.intervalSub&&this._chronometer.intervalSub.unsubscribe(),this._chronometer.intervalSub=void 0),t},n.prototype.activated=function(e){switch(void 0===e&&(e=this._chronometer),e.status){case t.StatusChonometer.pause:this._chronometer=this.pause(e);break;case t.StatusChonometer.start:this._chronometer=this.start(this.pause(e));break;case t.StatusChonometer.restart:e.second=0,this._chronometer=this.start(e);break;case t.StatusChonometer.stop:e.second=0,this._chronometer=this.pause(e)}return this.setTime(e,0)},n.prototype.pause=function(t){return this.stop(t)},n.prototype.stop=function(t){return t.intervalSub&&(t.intervalSub.unsubscribe(),t.intervalSub=void 0),t},n.prototype.start=function(t){var o=this;return t.status=2,t.intervalSub||(t.intervalSub=e.interval(this.interval).subscribe((function(){t=o.currentSecond(o.setTime(t))}))),t},Object.defineProperty(n.prototype,"innerText",{get:function(){var t=(this.format||"").split("00"),e=this.isMinutes?1:0;switch(t.length){case 1:case 2:return""+t[0]+this.timeFormat[e]+t[1];case 3:return""+t[0]+this.timeFormat[1]+t[1]+this.timeFormat[0]+t[2];case 4:default:return""+t[0]+this.timeFormat[2]+t[1]+this.timeFormat[1]+t[2]+this.timeFormat[0]+t[3]}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeFormat",{get:function(){var t=this._chronometer.time;return Array(this.formatNumber(t[2]),this.formatNumber(t[1]),this.formatNumber(t[0]))},enumerable:!1,configurable:!0}),n.prototype.formatNumber=function(t){return""+(t>9?t:"0"+t)},n.prototype.validNumber=function(t){var e=!r.isNaN(r.isNumber(t))&&t>0;return e||(console.error("Outdid maximo time no valid",t),this._chronometer.pause()),e?t:60},n.prototype.setTime=function(t,e){if(void 0===e&&(e=this.increment),t.second>=0){t.second=t.second+e;var o=this.validNumber(t.maxSecond),r=this.validNumber(t.maxMinute),n=Math.trunc(t.second/this.validNumber(t.maxSecond)/this.validNumber(t.maxMinute)),i=Math.trunc(t.second/this.validNumber(t.maxSecond))-n*r,s=t.second-Math.trunc(t.second/o)*o;n===t.maxHour?(t.second=0,t.time=new Array(0,0,0)):t.time=new Array(n,i,s)}return this.chronoEvents&&this.onChronoEvent.emit(t),t},n.prototype.ngOnDestroy=function(){this.chronoSub&&this.chronoSub.unsubscribe(),this._chronometer.intervalSub&&this._chronometer.intervalSub.unsubscribe(),this._chronometer.onChronometer.unsubscribe()},n}();a.decorators=[{type:o.Directive,args:[{selector:"[chronometer]",host:{"[innerText]":"innerText"}}]}],a.ctorParameters=function(){return[]},a.propDecorators={interval:[{type:o.Input}],increment:[{type:o.Input}],limitSecond:[{type:o.Input}],maxSecond:[{type:o.Input}],maxMinute:[{type:o.Input}],maxHour:[{type:o.Input}],isMinutes:[{type:o.Input}],chronometer:[{type:o.Input}],format:[{type:o.Input}],chronoEvents:[{type:o.Input}],onChronoEvent:[{type:o.Output}]};var u=function(){};u.decorators=[{type:o.NgModule,args:[{declarations:[a],imports:[],exports:[a],schemas:[o.CUSTOM_ELEMENTS_SCHEMA]}]}],t.Chronometer=s,t.NgxChronometerModule=u,t.Éµa=a,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-chronometer.umd.min.js.map